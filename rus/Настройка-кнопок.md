[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-кнопок.md)

Терминология:

* Физическая кнопка – физически существующая пара контактов подключенная каким-либо образом к контроллеру (одиночная кнопка, кнопка из матрицы кнопок, кнопка подключенная к сдвиговому регистру либо тумблер подключенным одним из этих способов). Список Физических кнопок и их состояние (красный – разомкнута, зеленый – замкнута) можно видеть в поле Physical Buttons вкладки Button Config.
* Логическая кнопка – информация, передаваемая в компьютер о нажатии какой-либо кнопки. Список логических кнопок, назначенных на них физических кнопок, функции кнопок и назначенные на них шифты можно видеть в поле Logical Buttons вкладки Button Config.

Процесс настройки кнопок заключайтся в назначении физическим кнопкам соответствия с логическими кнопками, а также настройка функций реакции логических кнопок на нажатия физических.  

### Назначение логических кнопок (вкладка Button Config).

![](../images/K3.jpg)

1. На вкладке Button Config в поле Logical buttons в строке с номером логической кнопки необходимо указать соответствующий ей номер физической кнопки. (Выяснить номер конкретной физической кнопки можно нажав ее. В поле Physical Buttons кружок с номером этой физической кнопки подсветится зеленым.)

После назначения логической кнопки и записи конфигурации в контроллер можно проверить ее работу. При нажатии на физ. кнопку строка с описанием логической кнопки будет подсвечена зеленым в соответствии с логикой работы функции кнопки. Физическая кнопка может фигурировать в описании любого числа логических кнопок.

Всем кнопкам (одновременно) можно задать время дребезга – поле «Button debounce time». При этом нажатия на кнопку короче указанного в этом поле времени не учитываются. Увеличение этого параметра позволяет избежать многократного срабатывания кнопок при однократном нажатии, если кнопки невысокого качества.

2. Назначить функцию кнопки:
* Button_Normal – нормальная кнопка;
* Button_Toggle – кнопка-тумблер, нажатие физ. кнопки инвертирует состояние лог. кнопки (Если лог. кнопка была не нажата, то нажатие физ. кнопки сделает ее нажатой до тех пор, пока не будет опять нажата физ. кнопка).

Функции для тумблеров:
* ToggleSwich_OnOff – при замыкании и размыкании контактов тумблера подключенных к физ. кнопке генерируется нажатие логической кнопки (время нажатия лог. кнопки задается в поле Press Timer);
* ToggleSwich_On - при замыкании контактов тумблера подключенных к физ кнопке генерируется нажатие логической кнопки (время нажатия лог. кнопки задается в поле Press Timer);
* ToggleSwich_Off - при размыкании контактов тумблера подключенных к физ кнопке генерируется нажатие логической кнопки (время нажатия лог. кнопки задается в поле Press Timer);

Функции для HAT-переключателей (многопозиционных кнопок/хаток): 
* PovX_Down, PovX_Up, PovX_Left, PovX_Right (где X – номер хатки) – нажатие направления вниз/вверх/влево/вправо соответствующей хатки.

Функция радиокнопок:
* RadioButtonX (Где X- номер группы радиокнопок) – все кнопки принадлежащие одной группе радиокнопок будут работать следующим образом: При кратковременном нажатии любой из физ. кнопок группы все логические кнопки группы отжимаются и остается нажатой только логическая кнопка сопоставленная нажатой физической кнопке. Логическая кнопка остается нажатой до тех пор, пока не будет нажата другая кнопка группы. При включении контроллера будет включена первая радиокнопка в списке. Радиокнопки можно использовать в качестве шифтов.

* Sequental_Button – режим последовательного переключения – при назначении одной физической кнопки на несколько логических с выставленной функцией перебора, при нажатии физической кнопки будет отжиматься текущая нажатая логическая кнопка и кратковременно нажиматься следующая логическая кнопка из списка.

* Sequental_Toggle – режим последовательного переключения – при назначении одной физической кнопки на несколько логических с выставленной функцией перебора, при нажатии физической кнопки будет отжиматься текущая нажатая логическая кнопка и нажиматься с фиксацией следующая логическая кнопка из списка.

Функции экодеров:
* Encoder_A, Encoder_B – см. [Подключение энкодеров](Подключение-энкодеров.md)

### Дополнительные настройки кнопок
Помимо вышепречисленных настроек также имеются следующие настройки:

* Invert - инверсия логического состояния кнопки;
* Disable - отключение вывода состояния текущей кнопки в систему;
* Shift - назначение для кнопик модификатора активации (шифта);
* Delay timer - временная задержка с момента нажатия физической кнопки до момента активации логической кнопки;
* Press timer - время, которое логическая кнопка будет оставаться нажатой с момента ее нажатия. 

#### Использование шифтов:
В качестве шифта может быть использована любая логическая кнопка. При этом логическая кнопка, которой назначен шифт сработает, если выполняется два условия: логическая кнопка которая назначена шифтом в нажатом состоянии, и логическая кнопка которой назначен шифт в нажатом состоянии. Если одной физической кнопке назначены один или несколько шифтов и в одной строке не назначен шифт, то лог. кнопка которой не назначен шифт сработает только если ни один шифт не нажат.
### Проверка работы кнопок
Окончательно работу кнопок можно проверить: (для Windows 10) «Пуск», «Параметры», «Устройства», «Устройства и принтеры» правой кнопкой на устройство, «Параметры игровых устройств управления», выбрать устройство, «Свойства». Либо при числе кнопок более 32 шт. программой VKB_Btn Tester, можно взять [здесь](../3rd-party/software/).

[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-кнопок.md)
