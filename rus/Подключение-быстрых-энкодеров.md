

[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-осей.md)

# Подключение быстрых энкодеров

К FreeJoy возможно подключение одного инкрементального энкодера с высокой частотой.

Примером является энкодер LPD3806.  Энкодеры такого типа являются оптоэлектрическими устройствами, обладают высоким числом импульсов на оборот, от 200 до 5000 (наш пример имеет 600 имп/об), могут работать с высокой скоростью (до 5000 об/мин), и имеют выход NPN типа с открытым коллектором. Последнее в том числе означает, что энкодер нуждается в дополнительном питании (наш пример требует питания 5-24В).

Вариант подключения энкодера изображен на рисунке ниже :

![A1.7](../images/A1.7.jpg)


Цветовая маркировка проводов энкодера на рисунке соответствует реальному цвету проводов энкодера:

- зеленый - канал А;

- белый - канал В;

- красный - "+" питания;

- черный - общий;

- Если кабель энкодера имеет оплетку (на рисунке не изображена), то ее необходимо так же подключить к контакту GND контроллера.

  **Как уже ранее упоминалось, возможно подключение одного быстрого энкодера, и выходы этого энкодера могут быть подключены только к выводам A8 и A9 контроллера. Кроме того выходы быстрого энкодера невозможно использовать как кнопки, а только как источник оси.** В то время как [обычные энкодеры](/rus/Подключение-энкодеров.md) могут быть использованы как источники сигналов для осей, так и для кнопок.

  Кнопка подключенная к контакту B11 будет выполнять роль центрирования оси (об этом ниже) и это может быть любая [кнопка](/rus/Подключение-кнопок.md) подключенная любым способом.

  

  Далее необходимо установить точность работы энкодера на вкладке "Encoders":

  ![A2.7](../images/A2.7.jpg)

  Здесь в поле "Encoder type" устанавливаем "Encoder_2x" или "Encoder_4x" (нормальная или высокая точность соответственно).

  

  ## Настройка энкодера как источника оси

  

  Настраиваем ось на вкладке "Axis Config":

  ![A3.7](../images/A3.7.jpg)

  В поле "Axis source 1" устанавливаем источник сигнала "Encoder";

  В поле "Channel/Encoder" устанавливаем номер энкодера с вкладки "Encoders". (Для быстрого энкодера этот номер всегда будет равен 0);

  Назначаем номер логической кнопки для центрирования (это может быть любая [кнопка](/rus/Подключение-кнопок.md) ): Выбираем номер логической кнопки в поле "Button 1",  ниже назначаем ей функцию "Center". На эту кнопку придется нажимать каждый раз после включения, установив наш руль в среднее положение, для того, что бы контроллер знал где находится центр оси и начинал отсчет с этого места. Этого можно избежать, если включать контроллер предварительно установив руль в среднее положение.

  ## Калибровка оси энкодера

  При этом исходим из того, что один импульс энкодера является изменением величины физической оси на единицу в ту или иную сторону. 

  Предположим, что мы хотим изготовить руль с углом поворота 900 град. Энкодер физически связан с рулем напрямую (т.е. один оборот руля руля одному обороту энкодера). Т.о. 900град./360град. = 2,5 оборота. 2,5об.*600имп./об.= 1500 имп. (вспоминаем, что наш энкодер обладает 600 импульсами на оборот). 1500имп./2=750 имп. Т.е. на половину оси у нас приходится 750 импульсов энкодера. Далее назначаем значения: "Minimum"  -750; "Center" 0; "Maximum" 750. Устанавливаем чекбокс "Center". Записываем данные в контроллер.

[На стартовую страницу](../README.md) | [Предыдущий раздел](Подключение-осей.md)


